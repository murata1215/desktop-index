# =============================================================================
# Desktop Index - 設定ファイル
# =============================================================================
# このファイルでクローラーの動作、検索対象、除外パターン等を設定します。
#
# 【重要】docker-compose.yml のボリュームマウント設定と合わせて編集してください。
# Docker内では /mnt/ 以下にマウントされたパスを指定します。
# =============================================================================

# ---------------------------------------------------------------------------
# スキャン対象パスの設定
# ---------------------------------------------------------------------------
# Docker内でのマウントパスを指定します。
# docker-compose.yml でマウントしたパスと一致させてください。
#
# 例:
#   docker-compose.yml: C:/Users:/mnt/c_users:ro
#   config.yaml: /mnt/c_users
# ---------------------------------------------------------------------------
scan_paths:
  - /mnt/c_users
  - /mnt/d_drive

# ---------------------------------------------------------------------------
# 除外パターンの設定
# ---------------------------------------------------------------------------
# スキャンから除外するファイル・フォルダのパターンを指定します。
# ワイルドカード（*）が使用可能です。
# ---------------------------------------------------------------------------
exclude_patterns:
  # 一時ファイル
  - "*.tmp"
  - "*.temp"
  - "~$*"           # Office一時ファイル
  - "*.bak"

  # システム・隠しフォルダ
  - ".*"            # ドットで始まる隠しファイル/フォルダ
  - "$RECYCLE.BIN"
  - "System Volume Information"
  - "Windows"
  - "ProgramData"
  - "AppData/Local/Temp"

  # 開発関連
  - "node_modules"
  - "__pycache__"
  - ".git"
  - ".svn"
  - "venv"
  - ".venv"
  - "*.pyc"

  # キャッシュ・ログ
  - "*.log"
  - "cache"
  - "Cache"
  - "Thumbs.db"
  - "desktop.ini"

# ---------------------------------------------------------------------------
# サポートする拡張子
# ---------------------------------------------------------------------------
# インデックス対象とするファイル拡張子を指定します。
# 内容検索は以下の拡張子のみ対応しています。
# ---------------------------------------------------------------------------
supported_extensions:
  # ドキュメント
  - .pdf
  - .docx
  - .doc       # 注: .doc（旧形式）は内容抽出に制限あり
  - .xlsx
  - .xls       # 注: .xls（旧形式）は内容抽出に制限あり
  - .pptx

  # テキスト
  - .txt
  - .md
  - .csv
  - .json
  - .xml
  - .yaml
  - .yml

  # ソースコード
  - .py
  - .js
  - .ts
  - .html
  - .css
  - .java
  - .c
  - .cpp
  - .h
  - .cs
  - .go
  - .rs
  - .rb
  - .php
  - .sql

# ---------------------------------------------------------------------------
# スキャン間隔の設定
# ---------------------------------------------------------------------------
# 定期スキャンの間隔を分単位で指定します。
# デフォルト: 60分（1時間ごと）
# ---------------------------------------------------------------------------
scan_interval_minutes: 60

# ---------------------------------------------------------------------------
# バッチサイズの設定
# ---------------------------------------------------------------------------
# Meilisearchへの一括登録時のドキュメント数を指定します。
# メモリ使用量とのバランスを考慮して調整してください。
# ---------------------------------------------------------------------------
batch_size: 1000

# ---------------------------------------------------------------------------
# 最大ファイルサイズ（MB）
# ---------------------------------------------------------------------------
# この値を超えるファイルは内容抽出をスキップし、
# メタデータのみをインデックスします。
# ---------------------------------------------------------------------------
max_file_size_mb: 50

# ---------------------------------------------------------------------------
# 最大テキスト長（文字数）
# ---------------------------------------------------------------------------
# 抽出したテキストがこの長さを超える場合は切り詰めます。
# Meilisearchの制限とメモリ使用量を考慮して設定してください。
# ---------------------------------------------------------------------------
max_content_length: 100000

# ---------------------------------------------------------------------------
# Meilisearch設定
# ---------------------------------------------------------------------------
# 通常は環境変数で上書きされるため、変更不要です。
# ---------------------------------------------------------------------------
meilisearch:
  host: "http://meilisearch:7700"
  index_name: "files"
  # API キー（本番環境では環境変数 MEILI_MASTER_KEY で設定）
  api_key: null

# ---------------------------------------------------------------------------
# ログ設定
# ---------------------------------------------------------------------------
logging:
  level: INFO    # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
