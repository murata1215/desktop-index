<!-- DevRelay Agreement v3 -->
【重要】ユーザーに渡すファイルを作成する場合は、必ず `.devrelay-output/` ディレクトリに保存してください。このディレクトリに置かれたファイルは自動的にユーザーに送信されます。

【プランモード】
現在はプランモードです。コードの書き換えや新規ファイルの作成は行わず、以下のみを行ってください：
- 調査・分析
- 実装プランの立案
- 質問や確認

プランが完成したら、最後に必ず以下のように伝えてください：
「このプランでよければ `e` または `exec` を送信してください。実装を開始します。」

ユーザーが `exec` を送信するまで、コードの変更は行わないでください。

【プランの説明】
プランを立案したら、必ずテキストで概要を説明してください。
ファイルに書き込むだけでなく、ユーザーが Discord/Telegram で内容を確認できるようにしてください。

【ユーザーへの質問】
AskUserQuestion ツールは使用しないでください（DevRelay 経由では応答を返せないため）。
ユーザーに質問や確認が必要な場合は、テキストで質問を書いてください。
ユーザーは Discord/Telegram 経由でテキストで回答します。

【コーディングスタイル】
ソースコードを書く際は、詳細な日本語コメントを必ず残してください。
以下のルールに従ってください：

1. **関数・メソッド**: 必ず JSDoc 形式で目的・引数・戻り値を説明
2. **クラス**: クラスの責務と使用方法を説明
3. **複雑なロジック**: 処理の流れを段階的に説明
4. **条件分岐**: なぜその条件が必要かを説明
5. **重要な変数**: 変数の用途を説明
6. **TODO・FIXME**: 将来の改善点を明記

コメントがないコードは不完全です。他の開発者が読んで理解できるレベルのコメントを心がけてください。
<!-- /DevRelay Agreement -->

---

# Desktop Index

ローカルディスク・ネットワークドライブのファイルを検索できるシステム。

## 技術スタック

- **言語**: Python 3.11+
- **Webフレームワーク**: FastAPI + Jinja2
- **検索エンジン**: Meilisearch
- **コンテナ**: Docker + docker-compose

## 起動方法

```bash
docker-compose up -d
```

http://localhost:8000 でアクセス可能。

## 設定

`config.yaml` でスキャン対象パス、除外パターン、スキャン間隔などを設定。

`docker-compose.yml` でボリュームマウント（検索対象フォルダ）を設定。

## ディレクトリ構成

```
desktopindex/
├── docker-compose.yml    # Docker Compose設定
├── Dockerfile           # Dockerイメージ定義
├── requirements.txt     # Python依存パッケージ
├── config.yaml         # アプリケーション設定
├── src/
│   ├── main.py        # FastAPIエントリーポイント
│   ├── config.py      # 設定管理
│   ├── crawler/       # ファイルクローラー
│   │   ├── scanner.py    # ファイルスキャン
│   │   ├── parser.py     # ドキュメント解析
│   │   └── scheduler.py  # 定期実行
│   ├── indexer/       # インデクサー
│   │   └── meilisearch_client.py
│   ├── api/           # REST API
│   │   └── routes.py
│   └── web/           # Web UI
│       ├── templates/
│       └── static/
└── data/              # データ永続化
```
